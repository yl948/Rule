# åŸºç¡€é…ç½®éƒ¨åˆ†
mixed-port: 7890      # æ··åˆç«¯å£ - HTTP(S) å’Œ SOCKS ä»£ç†
allow-lan: true      # å…è®¸å±€åŸŸç½‘è¿æ¥
bind-address: '*'     # ç›‘å¬åœ°å€
mode: rule           # è·¯ç”±æ¨¡å¼: ruleï¼ˆè§„åˆ™ï¼‰ / globalï¼ˆå…¨å±€ï¼‰ / directï¼ˆç›´è¿ï¼‰
log-level: info      # æ—¥å¿—çº§åˆ«
ipv6: false          # IPv6 å¼€å…³

# DNS é…ç½®
dns:
  enable: true       # å¯ç”¨è‡ªå®šä¹‰ DNS
  listen: 0.0.0.0:53 # DNS ç›‘å¬åœ°å€
  default-nameserver: # é»˜è®¤ DNS æœåŠ¡å™¨
    - 223.5.5.5      # é˜¿é‡Œ DNS
    - 119.29.29.29   # è…¾è®¯ DNS
  nameserver:        # å¸¸è§„ DNS æœåŠ¡å™¨
    - 223.5.5.5      # é˜¿é‡Œ DNS
    - 119.29.29.29   # è…¾è®¯ DNS

# ä»£ç†é…ç½®ï¼ˆç¤ºä¾‹ï¼‰
proxies:
  # è¿™é‡Œæ·»åŠ æ‚¨çš„ä»£ç†æœåŠ¡å™¨é…ç½®
  - name: "ç¤ºä¾‹ä»£ç†"    # ä»£ç†åç§°
    type: ss           # ä»£ç†ç±»å‹ï¼šss, vmess, trojan ç­‰
    server: server.com # æœåŠ¡å™¨åœ°å€
    port: 443          # æœåŠ¡å™¨ç«¯å£
    cipher: chacha20-ietf-poly1305  # åŠ å¯†æ–¹å¼
    password: password # å¯†ç 

# ä»£ç†æä¾›è€…é…ç½®ï¼ˆè®¢é˜…ï¼‰
proxy-providers:
  my-subscription:     # è®¢é˜…åç§°
    type: http         # è®¢é˜…ç±»å‹
    url: "å¡«å…¥ä½ çš„è®¢é˜…é“¾æ¥"  # è®¢é˜…åœ°å€
    interval: 3600     # è‡ªåŠ¨æ›´æ–°é—´éš”ï¼ˆç§’ï¼‰
    path: /home/ç”¨æˆ·å/.config/mihomo/proxy-providers/my-subscription.yaml  # è®¢é˜…æ–‡ä»¶è·¯å¾„
    health-check:      # å¥åº·æ£€æŸ¥é…ç½®
      enable: true     # å¯ç”¨å¥åº·æ£€æŸ¥
      interval: 600    # æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
      url: http://cp.cloudflare.com/generate_204  # æ£€æŸ¥åœ°å€

# Rule Providers é…ç½®ï¼ˆè§„åˆ™é›†ï¼‰
rule-providers:
  ai1:                # AIç›¸å…³è§„åˆ™é›†1
    type: http        # è§„åˆ™ç±»å‹
    behavior: classical  # è§„åˆ™è¡Œä¸º
    url: "https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/AI.list"  # è§„åˆ™åœ°å€
    path: ./rule-providers/ai1.yaml  # è§„åˆ™æ–‡ä»¶æœ¬åœ°è·¯å¾„
    interval: 86400   # æ›´æ–°é—´éš”ï¼ˆç§’ï¼‰

  ai2:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/AI2.list"
    path: ./rule-providers/ai2.yaml
    interval: 86400

  github:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/GitHub/GitHub.list"
    path: ./rule-providers/github.yaml
    interval: 86400

  tiktok:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/TikTok/TikTok.list"
    path: ./rule-providers/tiktok.yaml
    interval: 86400

  telegram:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.list"
    path: ./rule-providers/telegram.yaml
    interval: 86400

  streaming:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.list"
    path: ./rule-providers/streaming.yaml
    interval: 86400

  global:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Global/Global.list"
    path: ./rule-providers/global.yaml
    interval: 86400

  plex:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/yl948/Rule/refs/heads/main/Clash/plex.list"
    path: ./rule-providers/plex.yaml
    interval: 86400

# ä»£ç†ç»„é…ç½®
proxy-groups:
  # é€‰æ‹©ç±»å‹ä»£ç†ç»„
  - name: "ğŸ‘½ AI1"    # AIæœåŠ¡ä»£ç†ç»„1
    type: select      
    proxies:          
      - æ‰€æœ‰èŠ‚ç‚¹-è‡ªåŠ¨   
      - æ¸¯å°æ—¥æ–°éŸ©-è‡ªåŠ¨ 
      - é¦™æ¸¯-è‡ªåŠ¨      
      - å°æ¹¾-è‡ªåŠ¨      
      - æ—¥æœ¬-è‡ªåŠ¨      
      - æ–°åŠ å¡-è‡ªåŠ¨    
      - éŸ©å›½-è‡ªåŠ¨      
      - ç¾å›½-è‡ªåŠ¨      
      - å…¶ä»–åœ°åŒº-è‡ªåŠ¨   
      # - DIRECT        

  - name: "ğŸ‘½ AI2"    # AIæœåŠ¡ä»£ç†ç»„2
    type: select      
    proxies:          
      - æ‰€æœ‰èŠ‚ç‚¹-è‡ªåŠ¨   
      - æ¸¯å°æ—¥æ–°éŸ©-è‡ªåŠ¨ 
      - é¦™æ¸¯-è‡ªåŠ¨      
      - å°æ¹¾-è‡ªåŠ¨      
      - æ—¥æœ¬-è‡ªåŠ¨      
      - æ–°åŠ å¡-è‡ªåŠ¨    
      - éŸ©å›½-è‡ªåŠ¨      
      - ç¾å›½-è‡ªåŠ¨      
      - å…¶ä»–åœ°åŒº-è‡ªåŠ¨   
      # - DIRECT        

  - name: "ğŸ“˜ GitHub"    # GitHub ä»£ç†ç»„
    type: select        
    proxies:            
      - æ‰€æœ‰èŠ‚ç‚¹-è‡ªåŠ¨     
      - æ¸¯å°æ—¥æ–°éŸ©-è‡ªåŠ¨   
      - é¦™æ¸¯-è‡ªåŠ¨        
      - å°æ¹¾-è‡ªåŠ¨        
      - æ—¥æœ¬-è‡ªåŠ¨        
      - æ–°åŠ å¡-è‡ªåŠ¨      
      - éŸ©å›½-è‡ªåŠ¨        
      - ç¾å›½-è‡ªåŠ¨        
      - å…¶ä»–åœ°åŒº-è‡ªåŠ¨     
      
  - name: "ğŸ‘¯â€â™‚ï¸ TikTok"    # TikTok ä»£ç†ç»„
    type: select        
    proxies:            
      - æ‰€æœ‰èŠ‚ç‚¹-è‡ªåŠ¨     
      - æ¸¯å°æ—¥æ–°éŸ©-è‡ªåŠ¨   
      - é¦™æ¸¯-è‡ªåŠ¨        
      - å°æ¹¾-è‡ªåŠ¨        
      - æ—¥æœ¬-è‡ªåŠ¨        
      - æ–°åŠ å¡-è‡ªåŠ¨      
      - éŸ©å›½-è‡ªåŠ¨        
      - ç¾å›½-è‡ªåŠ¨        
      - å…¶ä»–åœ°åŒº-è‡ªåŠ¨     
      # - DIRECT          

  - name: "ğŸ™‹ Telegram"    # Telegram ä»£ç†ç»„
    type: select        
    proxies:            
      - æ‰€æœ‰èŠ‚ç‚¹-è‡ªåŠ¨     
      - æ¸¯å°æ—¥æ–°éŸ©-è‡ªåŠ¨   
      - é¦™æ¸¯-è‡ªåŠ¨        
      - å°æ¹¾-è‡ªåŠ¨        
      - æ—¥æœ¬-è‡ªåŠ¨        
      - æ–°åŠ å¡-è‡ªåŠ¨      
      - éŸ©å›½-è‡ªåŠ¨        
      - ç¾å›½-è‡ªåŠ¨        
      - å…¶ä»–åœ°åŒº-è‡ªåŠ¨     
      # - DIRECT          

  - name: "ğŸ“€ æµåª’ä½“"    # æµåª’ä½“ä»£ç†ç»„
    type: select        
    proxies:            
      - æ‰€æœ‰èŠ‚ç‚¹-è‡ªåŠ¨     
      - æ¸¯å°æ—¥æ–°éŸ©-è‡ªåŠ¨   
      - é¦™æ¸¯-è‡ªåŠ¨        
      - å°æ¹¾-è‡ªåŠ¨        
      - æ—¥æœ¬-è‡ªåŠ¨        
      - æ–°åŠ å¡-è‡ªåŠ¨      
      - éŸ©å›½-è‡ªåŠ¨        
      - ç¾å›½-è‡ªåŠ¨        
      - å…¶ä»–åœ°åŒº-è‡ªåŠ¨     
      # - DIRECT          

  - name: "ğŸŒ Plex"    # Plex ä»£ç†ç»„
    type: select        
    proxies:            
      - æ‰€æœ‰èŠ‚ç‚¹-è‡ªåŠ¨     
      - æ¸¯å°æ—¥æ–°éŸ©-è‡ªåŠ¨   
      - é¦™æ¸¯-è‡ªåŠ¨        
      - å°æ¹¾-è‡ªåŠ¨        
      - æ—¥æœ¬-è‡ªåŠ¨        
      - æ–°åŠ å¡-è‡ªåŠ¨      
      - éŸ©å›½-è‡ªåŠ¨        
      - ç¾å›½-è‡ªåŠ¨        
      - å…¶ä»–åœ°åŒº-è‡ªåŠ¨     
      # - DIRECT          

  - name: "ğŸŒ å›½å¤–"    # å›½å¤–ä»£ç†ç»„
    type: select        
    proxies:            
      - æ‰€æœ‰èŠ‚ç‚¹-è‡ªåŠ¨     
      - æ¸¯å°æ—¥æ–°éŸ©-è‡ªåŠ¨   
      - é¦™æ¸¯-è‡ªåŠ¨        
      - å°æ¹¾-è‡ªåŠ¨        
      - æ—¥æœ¬-è‡ªåŠ¨        
      - æ–°åŠ å¡-è‡ªåŠ¨      
      - éŸ©å›½-è‡ªåŠ¨        
      - ç¾å›½-è‡ªåŠ¨        
      - å…¶ä»–åœ°åŒº-è‡ªåŠ¨     
      # - DIRECT          

  # è‡ªåŠ¨æµ‹è¯•ç±»å‹ä»£ç†ç»„
  - name: "æ‰€æœ‰èŠ‚ç‚¹-è‡ªåŠ¨"  # æ‰€æœ‰èŠ‚ç‚¹è‡ªåŠ¨é€‰æ‹©ç»„
    type: url-test    
    use:              
      - my-subscription
    url: http://cp.cloudflare.com/generate_204
    interval: 60      
    tolerance: 150    

  - name: "æ¸¯å°æ—¥æ–°éŸ©-è‡ªåŠ¨"  
    type: url-test    
    use:              
      - my-subscription
    filter: "(æ¸¯|å°|æ—¥|æ–°åŠ å¡|éŸ©)"  
    url: http://cp.cloudflare.com/generate_204
    interval: 60      
    tolerance: 150    

  - name: "é¦™æ¸¯-è‡ªåŠ¨"      
    type: url-test
    use:
      - my-subscription
    filter: "(?i)(æ¸¯|HK|Hong Kong|ğŸ‡­ğŸ‡°|HongKong)"
    url: http://cp.cloudflare.com/generate_204
    interval: 60
    tolerance: 150

  - name: "å°æ¹¾-è‡ªåŠ¨"      
    type: url-test
    use:
      - my-subscription
    filter: "(?i)(å°|TW|Taiwan|ğŸ‡¹ğŸ‡¼)"
    url: http://cp.cloudflare.com/generate_204
    interval: 60
    tolerance: 150

  - name: "æ—¥æœ¬-è‡ªåŠ¨"      
    type: url-test
    use:
      - my-subscription
    filter: "(?i)(æ—¥æœ¬|JP|Japan|ğŸ‡¯ğŸ‡µ)"
    url: http://cp.cloudflare.com/generate_204
    interval: 60
    tolerance: 150

  - name: "æ–°åŠ å¡-è‡ªåŠ¨"    
    type: url-test
    use:
      - my-subscription
    filter: "(?i)(æ–°|ç‹®åŸ|SG|Singapore|ğŸ‡¸ğŸ‡¬)"
    url: http://cp.cloudflare.com/generate_204
    interval: 60
    tolerance: 150

  - name: "éŸ©å›½-è‡ªåŠ¨"      
    type: url-test
    use:
      - my-subscription
    filter: "(?i)(éŸ©|KR|Korea|ğŸ‡°ğŸ‡·)"
    url: http://cp.cloudflare.com/generate_204
    interval: 60
    tolerance: 150

  - name: "ç¾å›½-è‡ªåŠ¨"      
    type: url-test
    use:
      - my-subscription
    filter: "(?i)(ç¾|US|United States|ğŸ‡ºğŸ‡¸)"
    url: http://cp.cloudflare.com/generate_204
    interval: 60
    tolerance: 150

  - name: "å…¶ä»–åœ°åŒº-è‡ªåŠ¨"   
    type: url-test
    use:
      - my-subscription
    filter: "(?i)^(?!.*(æ¸¯|HK|Hong Kong|å°|TW|Taiwan|æ—¥æœ¬|JP|Japan|æ–°|ç‹®åŸ|SG|Singapore|éŸ©|KR|Korea|ç¾|US|United States))"
    url: http://cp.cloudflare.com/generate_204
    interval: 60
    tolerance: 150

# è§„åˆ™é…ç½®
rules:
  # ç‰¹å®šè§„åˆ™ä¼˜å…ˆåŒ¹é…
  - RULE-SET,ai1,ğŸ‘½ AI1              # AIç›¸å…³ç½‘ç«™èµ° AI1 ä»£ç†ç»„
  - RULE-SET,ai2,ğŸ‘½ AI2              # AIç›¸å…³ç½‘ç«™èµ° AI2 ä»£ç†ç»„
  - RULE-SET,github,ğŸ“˜ GitHub         # GitHub ç›¸å…³èµ° GitHub ä»£ç†ç»„
  - RULE-SET,tiktok,ğŸ‘¯â€â™‚ï¸ TikTok       # TikTok ç›¸å…³èµ° TikTok ä»£ç†ç»„
  - RULE-SET,telegram,ğŸ™‹ Telegram     # Telegram ç›¸å…³èµ° Telegram ä»£ç†ç»„
  - RULE-SET,streaming,ğŸ“€ æµåª’ä½“      # æµåª’ä½“ç›¸å…³èµ°æµåª’ä½“ä»£ç†ç»„
  - RULE-SET,global,ğŸŒ å›½å¤–           # å›½å¤–ç½‘ç«™èµ°å›½å¤–ä»£ç†ç»„
  - RULE-SET,plex,ğŸ¬ Plex           # Plex ç›¸å…³èµ° Plex ä»£ç†ç»„
  # å…¶ä»–æµé‡é»˜è®¤ç›´è¿
  - MATCH,DIRECT                     # æœªåŒ¹é…è§„åˆ™çš„æµé‡ç›´æ¥è¿æ¥ 
